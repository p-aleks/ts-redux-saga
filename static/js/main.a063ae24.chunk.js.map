{"version":3,"sources":["componenets/CardsList/CardsList.module.scss","componenets/Loader/Loader.module.scss","componenets/Card/Card.module.scss","store/actions.ts","store/state.ts","utils/idGenerator.ts","saga/Cards.saga.ts","store/index.ts","store/reducer.ts","componenets/Card/index.tsx","componenets/Loader/index.tsx","componenets/CardsList/index.tsx","App.tsx","index.tsx"],"names":["module","exports","GET_CARDS_REQUEST","GET_CARDS_SUCCESS","GET_CARDS_FAILURE","DELETE_CARD_REQUEST","DELETE_CARD_SUCCESS","DELETE_CARD_FAILURE","getCardsAction","payload","type","data","error","deleteCardAction","defaultState","loading","cards","createIDGenerator","id","IDGenerator","fetchCardsWorker","deleteCardWorker","cardsWatcher","getCards","state","fetchCard","count","axios","get","deleteCard","filter","card","mapCards","resp","media_type","map","next","value","title","url","action","call","put","select","takeEvery","sagaMiddleWare","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","run","Card","handleDelete","onDelete","className","styles","width","height","style","objectFit","src","alt","onClick","Loader","loader","loader__conent","CardsList","dispatch","useDispatch","useSelector","isLoading","fetchCards","React","useEffect","cardsList","cardsHeading","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a063ae24.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardsList\":\"CardsList_cardsList__3QCyF\",\"cardsHeading\":\"CardsList_cardsHeading__2_4jA\",\"cards\":\"CardsList_cards__212q7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__h4GXL\",\"loader__conent\":\"Loader_loader__conent__3tHwB\",\"spin\":\"Loader_spin__1I073\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__1siAd\"};","import { IFetchCardsFunc } from \"../types/types\";\r\n\r\nexport const GET_CARDS_REQUEST = 'GET_CARDS_REQUEST';\r\nexport const GET_CARDS_SUCCESS = 'GET_CARDS_SUCCESS';\r\nexport const GET_CARDS_FAILURE = 'GET_CARDS_FAILURE';\r\nexport const DELETE_CARD_REQUEST = 'DELETE_CARD_REQUEST';\r\nexport const DELETE_CARD_SUCCESS = 'DELETE_CARD_SUCCESS';\r\nexport const DELETE_CARD_FAILURE = 'DELETE_CARD_FAILURE';\r\n\r\nexport const getCardsAction: IFetchCardsFunc = {\r\n    request: payload => ({type: GET_CARDS_REQUEST, payload}),\r\n    success: data => ({type: GET_CARDS_SUCCESS, payload: data}),\r\n    failure: error => ({type: GET_CARDS_FAILURE, payload: error}),\r\n};\r\n\r\nexport const deleteCardAction: IFetchCardsFunc = {\r\n    request: payload => ({type: DELETE_CARD_REQUEST, payload}),\r\n    success: data => ({type: DELETE_CARD_SUCCESS, payload: data}),\r\n    failure: error => ({type: DELETE_CARD_FAILURE, payload: error}),\r\n};","import { IState } from \"../types/types\";\r\n\r\nexport const defaultState: IState = {\r\n    loading: false,\r\n    error: false,\r\n    cards: [],\r\n};","function* createIDGenerator (): IterableIterator<number> {\r\n    let id = 1;\r\n\r\n    while (true) {\r\n        yield id++;\r\n    }\r\n}\r\n\r\nconst IDGenerator = createIDGenerator();\r\n\r\nexport default IDGenerator;","import { call, put, select, takeEvery } from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport { DELETE_CARD_REQUEST, deleteCardAction, GET_CARDS_REQUEST, getCardsAction } from '../store/actions';\r\nimport IDGenerator from '../utils/idGenerator';\r\nimport { IAction, ICard, IState } from \"../types/types\";\r\n\r\ntype deleteCardArgsArr = [\r\n    cards: ICard[],\r\n    id: number\r\n]\r\n\r\ninterface fetchCardsResp {\r\n    data: ICard[]\r\n}\r\n\r\nconst getCards = (state: IState): ICard[] => state.cards;\r\n\r\nconst fetchCard = (count: number) => {\r\n    return axios.get(`https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&count=${count}`);\r\n};\r\n\r\nfunction deleteCard ([cards, id]: deleteCardArgsArr): ICard[] {\r\n    return cards.filter(card => card.id !== id);\r\n}\r\n\r\nfunction mapCards (resp: fetchCardsResp): any {\r\n    return resp.data\r\n        .filter(card => card.media_type === 'image')\r\n        .map(\r\n            card => (\r\n                { id: IDGenerator.next().value, title: card.title, url: card.url }\r\n            )\r\n        )\r\n}\r\n\r\nfunction* fetchCardsWorker (action: IAction) {\r\n    try {\r\n        const resp = yield call(fetchCard, action.payload);\r\n        const data = yield call(mapCards, resp);\r\n        yield put(getCardsAction.success(data));\r\n    } catch (e) {\r\n        yield put(getCardsAction.failure(!!e));\r\n    }\r\n}\r\n\r\nfunction* deleteCardWorker (action: IAction) {\r\n    try {\r\n        const cards = yield select(getCards);\r\n        const data = yield call(deleteCard, [cards, action.payload]);\r\n        yield put(deleteCardAction.success(data));\r\n    } catch (e) {\r\n        yield put(deleteCardAction.failure(!!e));\r\n    }\r\n}\r\n\r\n\r\nexport function* cardsWatcher () {\r\n    yield takeEvery(GET_CARDS_REQUEST, fetchCardsWorker);\r\n    yield takeEvery(DELETE_CARD_REQUEST, deleteCardWorker);\r\n}\r\n\r\n","import {applyMiddleware, createStore} from \"redux\";\r\nimport createSagaMiddleware           from 'redux-saga';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { reducer }                    from './reducer';\r\nimport { cardsWatcher }               from '../saga/Cards.saga';\r\n\r\nconst sagaMiddleWare = createSagaMiddleware();\r\n\r\nexport const store = createStore(reducer, composeWithDevTools(applyMiddleware(sagaMiddleWare)));\r\n\r\nsagaMiddleWare.run(cardsWatcher);\r\n\r\nexport type RootState = ReturnType<typeof reducer>;","import {\r\n    DELETE_CARD_FAILURE,\r\n    DELETE_CARD_REQUEST,\r\n    DELETE_CARD_SUCCESS,\r\n    GET_CARDS_FAILURE,\r\n    GET_CARDS_REQUEST,\r\n    GET_CARDS_SUCCESS,\r\n}                       from './actions';\r\nimport { defaultState } from './state';\r\nimport { IAction, IState } from \"../types/types\";\r\n\r\nexport const reducer = (state: IState = defaultState, action: IAction) => {\r\n    switch (action.type) {\r\n        case GET_CARDS_REQUEST:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n            };\r\n        case GET_CARDS_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                cards: [...state.cards, ...action.payload],\r\n            };\r\n        case GET_CARDS_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload,\r\n            };\r\n        case DELETE_CARD_REQUEST:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n            };\r\n        case DELETE_CARD_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                cards: action.payload,\r\n            };\r\n        case DELETE_CARD_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};","import React, { FC } from 'react';\r\nimport styles from './Card.module.scss';\r\nimport { ICard } from \"../../types/types\";\r\n\r\ninterface CardProps {\r\n    card: ICard\r\n    onDelete: (id: number) => void\r\n}\r\n\r\nconst Card: FC<CardProps> = ({ card, onDelete: handleDelete }) => {\r\n\r\n    return (\r\n        <div className={styles.card}>\r\n            <img width={364} height={200} style={{ objectFit: 'cover' }} src={card.url} alt=\"\"/>\r\n            <p>{card.title}</p>\r\n            <button onClick={() => handleDelete(card.id)}>Delete</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport styles from './Loader.module.scss'\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <div className={styles.loader}>\r\n            <div className={styles.loader__conent}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { FC }                              from 'react';\r\nimport { useDispatch, useSelector }         from 'react-redux';\r\nimport { deleteCardAction, getCardsAction } from '../../store/actions';\r\nimport Card                                 from '../Card';\r\nimport Loader                               from '../Loader';\r\nimport styles                               from './CardsList.module.scss';\r\nimport { ICard } from \"../../types/types\";\r\nimport { RootState } from \"../../store\";\r\n\r\nconst CardsList: FC = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const cards: ICard[] = useSelector((state: RootState) => state.cards);\r\n    const isLoading = useSelector((state: RootState) => state.loading);\r\n\r\n    const fetchCards = (count: number) => {\r\n        dispatch(getCardsAction.request(count));\r\n    };\r\n\r\n    const deleteCard = (id: number) => {\r\n        dispatch(deleteCardAction.request(id));\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        fetchCards(5);\r\n    }, []);\r\n\r\n    return (\r\n        <div className={styles.cardsList}>\r\n            {\r\n                isLoading\r\n                    ?\r\n                    <Loader/>\r\n                    :\r\n                    <>\r\n                        <div className={styles.cardsHeading}>\r\n                            <h1>Cards</h1>\r\n                            <button onClick={() => fetchCards(5)}>Download More</button>\r\n                        </div>\r\n                        <div className={styles.cards}>\r\n                            {cards.map(data => <Card key={data.id} card={data} onDelete={deleteCard} />)}\r\n                        </div>\r\n                    </>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CardsList;\r\n","import React     from 'react';\nimport CardsList from './componenets/CardsList';\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <CardsList />\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from \"react-redux\";\nimport {store} from './store'\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n\n"],"sourceRoot":""}